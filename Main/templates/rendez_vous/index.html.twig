{% extends 'base.html.twig' %}
{% set patientId = app.session.get('patient_id') %}
{% block body %}
<!-- Find A Doctor Section -->
    <section id="find-a-doctor" class="find-a-doctor section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>Trouver un médecin</h2>
        <p>Trouvez le médecin qui correspond à vos besoins</p>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row justify-content-center" data-aos="fade-up" data-aos-delay="200">
          <div class="col-lg-12">
            <div class="search-container">
              <form class="search-form" action="forms1/doctor-search.php" method="get">
                <div class="row g-3">
                  <div class="col-md-4">
                    <input type="text" class="form-control" name="doctor_name" placeholder="Nom du médecin ou mot-clé">
                  </div>
                  <div class="col-md-4">
                    <select class="form-select" name="specialty" id="specialty-select">
                      <option value="">Sélectionner une spécialité</option>
                      <option value="cardiology">Cardiologie</option>
                      <option value="neurology">Neurologie</option>
                      <option value="orthopedics">Orthopédie</option>
                      <option value="pediatrics">Pédiatrie</option>
                      <option value="dermatology">Dermatologie</option>
                      <option value="oncology">Oncologie</option>
                      <option value="surgery">Chirurgie</option>
                      <option value="emergency">Médecine d'urgence</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <button type="submit" class="btn btn-primary w-100">
                      <i class="bi bi-search me-2"></i>Rechercher un médecin
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>

<!-- Doctor Card 2 -->
        <div class="row" data-aos="fade-up" data-aos-delay="400">
        {% for staff in staffList %}
          {% if staff.roleSysteme == 'STAFF' and staff.typeStaff == 'RESP_PATIENTS' %}
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="doctor-card">
              <div class="doctor-image">
                <img src="{{ staff.profilePicture ? asset(staff.profilePicture) : 'assets/img/health/staff-1.webp' }}" alt="Dr. {{ staff.nom }} {{ staff.prenom }}" class="img-fluid">
                <div class="availability-badge online">Disponible</div>
              </div>
              <div class="doctor-info">
                <h5>Dr. {{ staff.nom }} {{ staff.prenom }}</h5>
                <p class="specialty">{{ staff.typeStaff ? staff.typeStaff : 'General' }}</p>
                <p class="experience">Experience info here</p>
                <div class="rating">
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <i class="bi bi-star-fill"></i>
                  <span class="rating-text">(4.9)</span>
                </div>
                <div class="appointment-actions">
                  <a href="{{ path('appointment', {'idStaff': staff.id}) }}" class="btn btn-outline-primary btn-sm">Voir le profil</a>
                  <a href="{{ path('appointment', {'idStaff': staff.id}) }}" class="btn btn-primary btn-sm">Prendre rendez-vous</a>
                </div>
              </div>
            </div>
          </div><!-- End Doctor Card -->
          {% endif %}
        {% endfor %}
        </div>

      </div>

    </section><!-- /Find A Doctor Section -->
{% endblock %}