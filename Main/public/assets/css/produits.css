/* ===========================
   assets/css/produits.css
   - Clean + corrected
   - Rails: badges visible
   =========================== */

/* ===== VARIABLES ===== */
:root{
    --primary:#667eea;
    --primary-dark:#5568d3;
    --success:#10b981;
    --danger:#ef4444;
    --gray-50:#f9fafb;
    --gray-100:#f3f4f6;
    --gray-200:#e5e7eb;
    --gray-800:#1f2937;
    --shadow-sm:0 2px 8px rgba(0,0,0,.08);
    --shadow-md:0 4px 16px rgba(0,0,0,.12);
    --shadow-lg:0 8px 32px rgba(0,0,0,.15);
  }
  
  /* ===== MESSAGES FLASH ===== */
  #flash-messages-container{
    position:fixed;
    top:20px;
    right:20px;
    z-index:10000;
    max-width:400px;
  }
  .alert-custom{
    background:#fff;
    border:none;
    border-left:4px solid;
    border-radius:12px;
    padding:16px 20px;
    margin-bottom:12px;
    box-shadow:var(--shadow-lg);
    display:flex;
    align-items:center;
    gap:12px;
    opacity:0;
    transform:translateX(400px);
    animation:slideIn .4s cubic-bezier(.4,0,.2,1) forwards;
  }
  .alert-custom.show{ opacity:1; transform:translateX(0); }
  .alert-success{ border-left-color:var(--success); }
  .alert-success i{ color:var(--success); font-size:1.5rem; }
  .alert-error{ border-left-color:var(--danger); }
  .alert-error i{ color:var(--danger); font-size:1.5rem; }
  .btn-close-custom{
    background:none;
    border:none;
    font-size:20px;
    color:#6b7280;
    cursor:pointer;
    padding:0;
    margin-left:auto;
    transition:color .2s;
  }
  .btn-close-custom:hover{ color:#1f2937; }
  @keyframes slideIn{ from{transform:translateX(400px);opacity:0} to{transform:translateX(0);opacity:1} }
  @keyframes slideOut{ to{transform:translateX(400px);opacity:0} }
  
  /* ===== HEADER ===== */
  .page-header{
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    color:#fff;
    padding:60px 0;
    margin-bottom:60px;
    border-radius:0 0 50px 50px;
    box-shadow:var(--shadow-lg);
  }
  .page-header h1{
    font-size:3rem;
    font-weight:700;
    margin-bottom:10px;
    text-shadow:0 2px 4px rgba(0,0,0,.1);
  }
  .page-header p{ font-size:1.25rem; opacity:.9; }
  
  /* ===== BOUTON MES COMMANDES ===== */
  .btn-orders{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:12px 18px;
    border-radius:14px;
    border:2px solid rgba(255,255,255,.25);
    background:linear-gradient(135deg,#10b981 0%,#059669 100%);
    color:#fff;
    font-weight:700;
    box-shadow:0 10px 22px rgba(16,185,129,.25);
    transition:all .25s ease;
    text-decoration:none;
  }
  .btn-orders:hover{
    transform:translateY(-2px);
    box-shadow:0 14px 28px rgba(16,185,129,.35);
    color:#fff;
  }
  
  /* ===== SEARCH / FILTER ===== */
  .search-filter-section{
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:var(--shadow-sm);
  }
  .search-box{ position:relative; }
  .search-box i.bi-search{
    position:absolute;
    left:15px;
    top:50%;
    transform:translateY(-50%);
    color:#6c757d;
    font-size:18px;
  }
  .search-box input{
    padding-left:45px;
    padding-right:40px;
    height:45px;
    border:2px solid #e9ecef;
    border-radius:8px;
    transition:all .3s;
  }
  .search-box input:focus{
    border-color:#0d6efd;
    box-shadow:0 0 0 .2rem rgba(13,110,253,.15);
  }
  .search-box .btn-clear{
    position:absolute;
    right:10px;
    top:50%;
    transform:translateY(-50%);
    background:none;
    border:none;
    color:#6c757d;
    cursor:pointer;
    padding:5px;
    transition:color .3s;
  }
  .search-box .btn-clear:hover{ color:#dc3545; }
  .form-select{
    height:45px;
    border:2px solid #e9ecef;
    border-radius:8px;
    transition:all .3s;
  }
  .form-select:focus{
    border-color:#0d6efd;
    box-shadow:0 0 0 .2rem rgba(13,110,253,.15);
  }
  #resultCount{ font-size:14px; font-weight:500; }
  #resultCount #count{ color:#0d6efd; font-weight:700; }
  
  /* ===== CARTES PRODUITS ===== */
  .produit-card{
    background:#fff;
    border-radius:20px;
    overflow:hidden;
    transition:all .3s cubic-bezier(.4,0,.2,1);
    border:2px solid var(--gray-100);
    height:100%;
    display:flex;
    flex-direction:column;
    animation:fadeInUp .5s ease;
  }
  .produit-card:hover{
    transform:translateY(-8px);
    box-shadow:var(--shadow-lg);
    border-color:var(--primary);
  }
  .produit-card.unavailable{ opacity:.7; }
  .produit-card.unavailable:hover{
    transform:translateY(-4px);
    box-shadow:var(--shadow-md);
  }
  .produit-image-container{
    position:relative;
    width:100%;
    height:240px;
    background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);
    overflow:hidden;
  }
  .produit-img{
    width:100%;
    height:100%;
    object-fit:contain;
    padding:20px;
    transition:transform .3s;
  }
  .produit-card:hover .produit-img:not(.img-grayscale){ transform:scale(1.1); }
  .img-grayscale{ filter:grayscale(100%) opacity(.5); }
  
  .badge-indisponible{
    position:absolute;
    top:16px;
    left:16px;
    background:linear-gradient(135deg,var(--danger) 0%,#dc2626 100%);
    color:#fff;
    padding:8px 16px;
    border-radius:50px;
    font-weight:600;
    font-size:.875rem;
    text-transform:uppercase;
    letter-spacing:.5px;
    box-shadow:0 4px 12px rgba(239,68,68,.4);
    z-index:10;
  }
  .price-badge{
    position:absolute;
    top:16px;
    right:16px;
    background:linear-gradient(135deg,var(--success) 0%,#059669 100%);
    color:#fff;
    padding:8px 16px;
    border-radius:50px;
    font-weight:700;
    font-size:1.125rem;
    box-shadow:0 4px 12px rgba(16,185,129,.4);
    z-index:10;
  }
  .card-body{ padding:24px; display:flex; flex-direction:column; flex-grow:1; }
  .card-title{
    font-size:1.25rem;
    font-weight:700;
    color:var(--gray-800);
    margin-bottom:12px;
    line-height:1.4;
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
  .card-category{
    display:inline-block;
    padding:6px 12px;
    background:var(--gray-100);
    color:var(--gray-800);
    border-radius:8px;
    font-size:.875rem;
    font-weight:500;
    margin-bottom:12px;
  }
  .card-stock{
    display:flex;
    align-items:center;
    gap:8px;
    font-size:.875rem;
    color:#6b7280;
    margin-bottom:16px;
  }
  .status-badge{
    padding:8px 16px;
    border-radius:50px;
    font-weight:600;
    font-size:.875rem;
    margin-bottom:16px;
    display:inline-flex;
    align-items:center;
    gap:6px;
  }
  .status-badge.available{ background:#d1fae5; color:#065f46; }
  .status-badge.unavailable{ background:#fee2e2; color:#991b1b; }
  
  .card-actions{ display:flex; gap:10px; margin-top:auto; }
  .btn-add-cart{
    flex:1;
    padding:12px;
    background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);
    color:#fff;
    border:none;
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
    transition:all .3s;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
  }
  .btn-add-cart:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 20px rgba(102,126,234,.4);
  }
  .btn-details{
    padding:12px 20px;
    background:#fff;
    color:var(--primary);
    border:2px solid var(--primary);
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
    transition:all .3s;
  }
  .btn-details:hover{ background:var(--primary); color:#fff; }
  .btn-unavailable{
    flex:1;
    padding:12px;
    background:var(--gray-200);
    color:#6b7280;
    border:none;
    border-radius:12px;
    font-weight:600;
    cursor:not-allowed;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
  }
  
  /* ===== MODAL ===== */
  .modal-content{ border-radius:20px; border:none; overflow:hidden; }
  .modal-header{
    background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);
    color:#fff;
    border:none;
    padding:24px;
  }
  .modal-title{ font-weight:700; font-size:1.5rem; }
  .modal-body{ padding:32px; }
  .modal-body img{ border-radius:12px; box-shadow:var(--shadow-md); }
  .detail-row{
    display:flex;
    justify-content:space-between;
    padding:12px 0;
    border-bottom:1px solid var(--gray-200);
  }
  .detail-row:last-child{ border-bottom:none; }
  .detail-label{ font-weight:600; color:var(--gray-800); }
  .detail-value{ color:#6b7280; }
  
  /* ===== EMPTY STATE ===== */
  .empty-state{
    text-align:center;
    padding:80px 20px;
  }
  .empty-state i{
    font-size:6rem;
    color:var(--gray-200);
    margin-bottom:24px;
  }
  .empty-state h3{ color:var(--gray-800); margin-bottom:12px; }
  .empty-state p{ color:#6b7280; }
  
  /* ===== FILTER ANIMS ===== */
  .produit-item{ transition:opacity .3s ease, transform .3s ease; }
  .produit-item.fade-out{ opacity:0; transform:scale(.95); }
  .produit-item.hidden{ display:none !important; }
  
  /* ===== AI RECO RAILS ===== */
  .reco-zone{
    border:2px solid rgba(102,126,234,.12);
    border-radius:24px;
    padding:28px;
    background:linear-gradient(135deg,#fff 0%,#f8f9fa 100%);
    box-shadow:0 4px 20px rgba(102,126,234,.08),0 0 0 1px rgba(102,126,234,.05);
    overflow:hidden;
    margin-bottom:40px;
    position:relative;
  }
  .reco-zone::before{
    content:'';
    position:absolute;
    top:0;left:0;right:0;
    height:4px;
    background:linear-gradient(90deg,#667eea 0%,#764ba2 100%);
    border-radius:24px 24px 0 0;
  }
  .reco-head{
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap:16px;
    margin-bottom:24px;
    flex-wrap:wrap;
  }
  .reco-title{
    margin:0;
    font-weight:900;
    letter-spacing:-.5px;
    font-size:1.875rem;
    color:#1f2937;
    line-height:1.2;
  }
  .reco-sub{
    margin:6px 0 0;
    color:#6b7280;
    font-size:.95rem;
    font-weight:500;
  }
  .reco-chip{
    font-size:.8rem;
    padding:8px 16px;
    border-radius:100px;
    background:rgba(102,126,234,.08);
    border:1.5px solid rgba(102,126,234,.2);
    font-weight:700;
    white-space:nowrap;
    color:#667eea;
    letter-spacing:.5px;
    text-transform:uppercase;
  }
  .reco-chip.ai{
    background:rgba(16,185,129,.08);
    border-color:rgba(16,185,129,.25);
    color:#059669;
  }
  .reco-rail{
    position:relative;
    border-radius:20px;
    overflow:hidden;
    padding:20px 12px;
    background:rgba(248,250,252,.6);
    min-height:300px;
    border:1px solid rgba(0,0,0,.04);
  }
  .reco-track{
    display:flex;
    gap:20px;
    width:max-content;
    will-change:transform;
    animation:marquee 45s linear infinite;
  }
  .reco-rail:hover .reco-track{ animation-play-state:paused; }
  @keyframes marquee{ 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }
  
  .reco-card{
    width:260px;
    min-width:260px;
    border-radius:20px;
    overflow:hidden;
    border:2px solid rgba(102,126,234,.1);
    background:#fff;
    box-shadow:0 4px 16px rgba(0,0,0,.06),0 0 0 1px rgba(0,0,0,.02);
    transition:all .3s cubic-bezier(.4,0,.2,1);
    flex-shrink:0;
    position:relative;
  }
  .reco-card:hover{
    transform:translateY(-6px) scale(1.02);
    box-shadow:0 12px 32px rgba(102,126,234,.15),0 0 0 2px rgba(102,126,234,.2);
    border-color:rgba(102,126,234,.3);
  }
  .reco-img{
    width:100%;
    height:160px;
    object-fit:cover;
    display:block;
    background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);
    transition:transform .4s ease;
  }
  .reco-card:hover .reco-img{ transform:scale(1.08); }
  .reco-body{ padding:20px; }
  .reco-cat{
    font-size:.75rem;
    color:#6b7280;
    text-transform:uppercase;
    letter-spacing:1px;
    font-weight:700;
    margin-bottom:8px;
    display:inline-block;
    padding:4px 10px;
    background:rgba(102,126,234,.08);
    border-radius:6px;
  }
  .reco-name{
    font-weight:800;
    margin-top:8px;
    line-height:1.35;
    font-size:1.05rem;
    color:#1f2937;
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
    min-height:44px;
  }
  .reco-price{
    font-weight:900;
    margin-top:12px;
    font-size:1.375rem;
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }
  .reco-btn{
    width:100%;
    margin-top:16px;
    border-radius:14px;
    font-weight:700;
    padding:12px;
    border:none;
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    color:#fff;
    box-shadow:0 4px 14px rgba(102,126,234,.25);
    cursor:pointer;
    transition:all .3s;
  }
  .reco-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(102,126,234,.4);
  }
  .reco-empty{
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    color:#6b7280;
    font-weight:600;
    padding:40px 20px;
    text-align:center;
    font-size:1.05rem;
    line-height:1.6;
  }
  .reco-empty::before{
    content:'ðŸ“¦';
    font-size:3rem;
    margin-bottom:16px;
    opacity:.5;
  }
  
  /* âœ… BADGES MULTI (Explainable) */
  .reco-badges{
    position:absolute;
    top:10px;
    left:10px;
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    z-index:5;
  }
  .reco-badge{
    padding:6px 10px;
    border-radius:999px;
    font-size:12px;
    font-weight:800;
    backdrop-filter:blur(8px);
    background:rgba(255,255,255,.88);
    border:1px solid rgba(0,0,0,.06);
    box-shadow:0 10px 25px rgba(0,0,0,.08);
  }
  .reco-badge.hot{ }
  .reco-badge.fav{ }
  .reco-badge.sim{ }
  
  /* ===== Responsive ===== */
  @media (max-width:768px){
    .page-header h1{ font-size:2rem; }
    .produit-image-container{ height:200px; }
    .card-actions{ flex-direction:column; }
    #flash-messages-container{
      left:20px; right:20px; max-width:none;
    }
  }
  @media (max-width:992px){
    .reco-head{ flex-direction:column; align-items:flex-start; }
    .reco-title{ font-size:1.5rem; }
  }
  @media (max-width:768px){
    .reco-card{ width:220px; min-width:220px; }
    .reco-rail{ min-height:280px; padding:16px 8px; }
    .reco-img{ height:140px; }
    .reco-body{ padding:16px; }
    .reco-zone{ padding:20px; }
  }
  @media (max-width:576px){
    .reco-card{ width:200px; min-width:200px; }
  }
  
  /* ===== Anim ===== */
  @keyframes fadeInUp{
    from{ opacity:0; transform:translateY(30px); }
    to{ opacity:1; transform:translateY(0); }
  }
  /* =======================
   EXPLAINABLE BADGES (rail)
   ======================= */
.reco-card { position: relative; }

.reco-badges{
  position:absolute;
  top:10px;
  left:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  z-index: 5;
}

.reco-badge{
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:800;
  backdrop-filter: blur(8px);
  background: rgba(255,255,255,.88);
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 10px 25px rgba(0,0,0,.08);
  color:#111827;
}