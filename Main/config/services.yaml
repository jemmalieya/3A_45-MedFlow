# config/services.yaml

parameters:
    pieces_jointes_directory: '%kernel.project_dir%/public/uploads/pieces_jointes'
    produits_images_dir: '%kernel.project_dir%/public/uploads/produits'
    openfda.api_key: '%env(OPENFDA_API_KEY)%'
    openfda.timeout: '%env(int:OPENFDA_TIMEOUT)%'

services:
    _defaults:
        autowire: true
        autoconfigure: true

    # Stripe
    App\Service\StripePaymentService:
        arguments:
            $stripeSecretKey: '%env(STRIPE_SECRET_KEY)%'
            $appUrl: '%env(APP_URL)%'

    # Twilio
    App\Service\TwilioSmsService:
        arguments:
            $sid: '%env(TWILIO_SID)%'
            $token: '%env(TWILIO_TOKEN)%'
            $from: '%env(TWILIO_FROM)%'

    # OpenFDA (Service d'interactions m√©dicamenteuses)
    App\Service\OpenFdaService:
        arguments:
            $apiKey: '%openfda.api_key%'

    # Auto-register services in src/
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'
